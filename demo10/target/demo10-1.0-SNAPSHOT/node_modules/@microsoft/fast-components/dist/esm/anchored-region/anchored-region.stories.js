import { Direction, RtlScrollConverter } from "@microsoft/fast-web-utilities";
import addons from "@storybook/addons";
import { STORY_RENDERED } from "@storybook/core-events";
import AnchoredRegionTemplate from "./fixtures/base.html";
import "./index";
addons.getChannel().addListener(STORY_RENDERED, (name) => {
    if (name.toLowerCase().startsWith("anchored-region")) {
        //scroll stuff into view
        document.querySelectorAll("div[id^=viewport]").forEach((el) => {
            el.scrollTop = 280;
            RtlScrollConverter.setScrollLeft(el, el.dir === Direction.rtl ? -250 : 250, el.dir === Direction.rtl ? Direction.rtl : Direction.ltr);
        });
        // header region
        const headerFixedButton = document.getElementById("anchor-header-menu-fixed");
        headerFixedButton === null || headerFixedButton === void 0 ? void 0 : headerFixedButton.addEventListener("click", (e) => {
            const menu = document.getElementById("header-menu-fixed");
            if (menu.style.display === "none") {
                menu.style.display = "";
            }
            else {
                menu.style.display = "none";
            }
        });
        const headerScalingButton = document.getElementById("anchor-header-menu-scaling");
        headerScalingButton === null || headerScalingButton === void 0 ? void 0 : headerScalingButton.addEventListener("click", (e) => {
            const menu = document.getElementById("header-menu-scaling");
            if (menu.style.display === "none") {
                menu.style.display = "";
            }
            else {
                menu.style.display = "none";
            }
        });
        const regionScalingUpdate = document.getElementById("region-upd1");
        document
            .getElementById("viewport-upd1")
            .addEventListener("scroll", () => regionScalingUpdate.update());
        const togglesRegion = document.getElementById("toggles-region");
        // toggle anchor example
        document.querySelectorAll("[id^=toggles1-anchor").forEach(anchor => {
            anchor.addEventListener("click", (e) => {
                togglesRegion.setAttribute("anchor", e.target.id);
            });
        });
        document
            .getElementById("toggle-positions-horizontal")
            .addEventListener("click", (e) => {
            if ((togglesRegion === null || togglesRegion === void 0 ? void 0 : togglesRegion.getAttribute("horizontal-default-position")) === "right") {
                togglesRegion.setAttribute("horizontal-default-position", "left");
            }
            else {
                togglesRegion.setAttribute("horizontal-default-position", "right");
            }
        });
        document
            .getElementById("toggle-positions-vertical")
            .addEventListener("click", (e) => {
            if ((togglesRegion === null || togglesRegion === void 0 ? void 0 : togglesRegion.getAttribute("vertical-default-position")) === "top") {
                togglesRegion.setAttribute("vertical-default-position", "bottom");
            }
            else {
                togglesRegion.setAttribute("vertical-default-position", "top");
            }
        });
        document
            .getElementById("toggle-inset-vertical")
            .addEventListener("click", (e) => {
            if ((togglesRegion === null || togglesRegion === void 0 ? void 0 : togglesRegion.getAttribute("vertical-inset")) === "true") {
                togglesRegion.setAttribute("vertical-inset", "false");
            }
            else {
                togglesRegion.setAttribute("vertical-inset", "true");
            }
        });
        document
            .getElementById("toggle-inset-horizontal")
            .addEventListener("click", (e) => {
            if ((togglesRegion === null || togglesRegion === void 0 ? void 0 : togglesRegion.getAttribute("horizontal-inset")) === "true") {
                togglesRegion.setAttribute("horizontal-inset", "false");
            }
            else {
                togglesRegion.setAttribute("horizontal-inset", "true");
            }
        });
        document
            .querySelectorAll("[id^=anchor-menu-many]")
            .forEach((el) => {
            el.addEventListener("click", (e) => {
                const menuNum = el.id.substr(16);
                const menu = document.getElementById(`menu-many${menuNum}`);
                menu.style.display = menu.style.display === "none" ? "" : "none";
            });
        });
    }
});
export default {
    title: "Anchored Region",
};
export const AnchoredRegion = () => AnchoredRegionTemplate;
